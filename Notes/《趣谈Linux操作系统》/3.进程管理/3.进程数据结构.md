# 进程数据结构

有的进程只有一个线程，有的进程有多个线程，它们都需要由内核分配 CPU 来干活。可是 CPU 总共就这么几个，应该怎么管理，怎么调度呢？

在 Linux 里面，无论是进程，还是线程，到了内核里面，我们统一都叫任务（Task）

首先，所有执行的项目应该有个项目列表吧，所以 Linux 内核也应该先弄一个链表，将所有的 task 串起来。

```c
struct list_head  tasks;
```

## task 结构

每个 task 都是 task_struct 结构，我们来看看包含哪些字段

### 任务 ID

每一个任务都应该有一个 ID，作为这个任务的唯一标识。task_struct 里面涉及任务 ID 的，有下面几个：

```c
pid_t pid;
pid_t tgid;
struct task_struct *group_leader;
```

> 任何一个进程，如果只有主线程，那 pid 是自己，tgid 是自己，group_leader 指向的还是自己。如果一个进程创建了其他线程，那就会有所变化了。线程有自己的 pid，tgid 就是进程的主线程的 pid，group_leader 指向的就是进程的主线程。有了 tgid，我们就知道 tast_struct 代表的是一个进程还是代表一个线程了。

### 信号处理
